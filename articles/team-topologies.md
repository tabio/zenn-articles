---
title: "Team Topologies の輪読会用の備忘録"
emoji: "😸"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: ["チーム設計", "輪読会", "TeamTopologies"]
published: false
---

# はじめに

Team Topologies 輪読会前の頭の整理＆備忘録

https://www.amazon.co.jp/dp/4820729632

# Chapter 1 : 組織の問題

チームトポロジーを考える必要性についてが述べられている

- チームトポロジーとは何か？
  - 人、技術、ビジネスの変化に継続的に対処できるようチームを進化させるためのガイド
  - チーム構造は、ソフトウェアデリバリーの安定化に影響を与えるものであることの理解を促すもの
- 最終的なゴール
  - 顧客ニーズにあうソフトウェアをチームがより簡単に構築、実行でき、オーナーシップを持てるようにすること
- 意識すべきもの
  - コンウェイの法則
    - チームの構成がプロダクトの設計に影響する（ex. モノリス、マイクロサービス）
    - 重要なのは、要求されているソフトウェアとチーム構造は一致していないといけない（コンウェイの法則への対抗はNG）
      - 例えば、モノリスなアーキテクチャに対してチームが複数ある状態は不適切な設計を生み易い
        - モノリスがNG、マイクロサービスがOKという話ではない。チームの認知負荷を考慮した設計であることが重要という話
  - 認知負荷の制限
    - 認知負荷の主語は **チーム**
      - チームファーストの障害として認知負荷がある
    - 人間の脳に留められる情報量には限界がある
      - 個人だけじゃなくチームも同じであることを認識すること
      - 個人の認知負荷は個々で判断できそうだが、チームの認知負荷はどうやって判定すればよいのだろうか？
        - 認知負荷を問う質問をしてみる（Chapter 3）
    - ドメインを複数持つことはチームの認知負荷が上がるわかりやすい例
      - 責任範囲の拡大 -> コンテキストスイッチの発生 -> 業務熟練度の遅れ -> 品質の低下 -> モチベーションの低下
    - 他チームとのコラボレーション
      - 他チームと関わることで必然的にコミュニケーションが発生しその中で認知負荷は高まる
      - 3つのアプローチのどれが適切かの判断が重要（Chapter 7）

# Chapter 2 : コンウェイの法則が重要な理由

- 組織構造やチーム間のコミュニケーションパスが、**結果的に** 構築されるシステムのアーキテクチャになってしまう
  - チームの設計とソフトウェアの設計を別の活動にすることはできないというシンプルな法則
- ではコンウェイの法則が避けられてないとしたら何を注意しないといけないか？
  - チーム間のコミュニケーションを制限することで、早いデリバリーができるように促す
    - チーム間のコミュニケーションのパターンがある（Chapter 7）
      - チームに持っていない知識や技術を借りる場合
      - 他チーム向けの自チームの知識をAPI化する場合
    - コミュニケーションが多い方が良いと考えがちだがそれは違う
      - 必要とされるのは特定のチーム間における集中的なコミュニケーション
    - チーム間でのやり取りに利用するツールは共通のものを使うこと
      - 別々の課題管理ツールを使うと上手くいかないよ
- アーキテクチャを再設計したい場合はどうしたら良いか？
  - 最適なアーキテクチャを設計し、その設計に合わせたチーム設計を行っていく（逆コンウェイ戦略）
  - 理想はチームを編成する前に最適なアーキテクチャを理解し設計することだが、スタートアップでそれは難しい気がする
- コンウェイの法則によればこのチーム設計が最も自然に望ましいソフトウェアアーキテクチャを生み出す
  注意すべきは、コンポーネントの高い凝集性を意識するあまり、コンプリケイテッドチーム単位で分割しないこと
  **ストリームアラインドチーム単位** での凝集性を意識すること
  ![](/images//team-topologies/chapter2.png)

# Chapter 3 : チームファースト思考

- チームファースト思考はなぜ必要か？
  - モダンなソフトウェア開発における情報の量と質を適切に扱うには個人では継続不可能だから
  - チームのパフォーマンスが高ければ効率的にソフトウェアを提供できるから
    - パフォーマンスにおいては、 **誰がいるか？** ではなく、チームとしての力学の方が重要だというGoogleの研究結果
      - 個人志向のメンバーがチームに与える影響力より、集団志向のメンバーの方がチームのパフォーマンスを上げる可能性が高い
  - チームの責任範囲をチームが扱える認知負荷に合わせたものにする
    - 認知負荷を超えたチームは集団志向ではなく個人志向で振る舞うようになる
    - 運用するアプリケーション数
      - チームの認知負荷を超えるサブシステムを許容しない
    - 管理しなければならないツールの数を減らすために自動化を考える
  - 多様なバックグラウンドを持つチームの方がバイアスが掛からないので新しい発想で解決策を打てる可能性が高い
  - **注意！**
    - 継続的デリバリーやテストファーストの開発などの基本的なエンジニアリングスキルがあってこそのチームファーストアプローチ
      - エンジニアリングの基礎が定まってない段階でチームファーストに投資しても意味がない
- チームについて
  - 5~9人の共通のゴールのために働く単位
  - 長続きする小さなチームを標準とする
    - 理想は人が年1回チームを離れてもチームのパフォーマンスに影響を与えないチーム
      - チームがハイパフォーマンスを維持するためには、チーム力学を育てなくてはならない、故にタックマンモデルの混乱期は続く
    - 長続きするための要因は **信頼**
      - 2週間〜3ヶ月でやっとチームの形ができる
        - 6ヶ月のプロジェクトを完了してパフォーマンスが向上してきたところでメンバーを他チームにアサインするのは価値がない
    - 新しい人を追加してもすぐパフォーマンス増えない（ブルックスの法則）
  - チームの最適人数についての参考
    - 7人が人類力学的に信頼関係を結べる限界（ダンバー数）
    - two pizzaルール（By Amazon）
- **1つのチーム** がソフトウェアのオーナーになることの重要性
  - オーナーシップを持つことでプロダクトの目的の維持とそのための継続的な運用を考えられるようになる
    - オーナーシップが個人の縄張り争い争いにならないようにする（この部分は自分のコードの占有者にならないように）
      - チームはコードの世話役であるというスタンスが大事
  - 複数のチームが同一のシステムやサブシステムに修正を許すと混乱する。そしてその変更に対して誰もオーナーシップを発揮しなくなる
    - 他チームからのPRは作れるようにしても、その変更に対する責任はチームであるべき
- メンバーにチームファーストのマインドセットの育成が必要
  - 個人のニーズよりもチームのニーズを優先しなくてはならい（具体例として以下）
    1. スタンドアップやMTGに遅れない
    1. 議論や調査を脱線させない
    1. 自分の新たな仕事を始める前に他のメンバーの障害を取り除くのを助けること
    1. 新しく参加したメンバー、経験の少ないメンバーをメンタリングすること
    1. 議論に勝敗をつけようとするのをやめ、良い代替案の模索に合意すること
- チームの認知負荷を測るために中立的立場から以下の質問をすると良い
  - **「チームは、頼まれた仕事に対して、効果的にタイムリーな仕事ができていると思うか？」**
    - なぜ問いなのか？（モジュール、クラスやメソッド数などで認知負荷を測ることはできなかったというレポート有り）
- 認知負荷を下げるには、ドメインの種類と数をチームで定義する
  - チームで扱うドメインとは何を指すものなのか？
    - インフラチームを作るべきなのか？テストチームを作るべきなのか？プロダクトで分けるべきなのか？
  - コレという定義はないので、**責任を担うチームがどう感じているか？** という点議論していく
- 認知負荷軽減の経験則
  - 経験則１
    - ドメインをサブドメインに分割し、それに応じてチームも分けるパターン
  - 経験則２
    - シンプルなドメインを２〜３扱う7〜９人のチーム
      - シンプルが故にモチベーション低下リスク有り
  - 経験則３
    - 複雑なドメインを割り当てられたチームはそれ以外のドメインをたとえシンプルなものであっても割り当てるべきではない
    - チームに２つの煩雑なドメインが割当てられると、実際にはそれぞれのドメインを担当する２チームに分割されたように振る舞う
      - 分割された割には全員が両方のドメインに関する知識を要求され認知負荷や調整コストが上がる罠がある
- 分割したとして、チーム間の良い相互作用を作るには？
  - チーム自信をAPIとしてみることで見えてくるものがある（以下例）
    - コミュニケーションツールはSlackで、メンションしてくれれば反応します
    - 依頼はTrelloからお願いします
    - 他チームのPRは週１でチームで検討する場があります
    - 現在開発しているプロダクトと中長期的な展望はWikiにまとめてあります

# Chapter 4 : 静的なチームトポロジーチームのアンチパターン

# Chapter 5 : 4つの基本的なチームタイプ

# Chapter 6 : チームファーストな境界を決める

# Chapter 7 : チームインタラクションモード

# Chapter 8 : 組織的センシングでチーム構造を進化させる

# Chapter 9 : まとめ:次世代デジタル運用モデル