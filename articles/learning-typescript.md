---
title: "æ‰‹ã‚’å‹•ã‹ã—ã¦å­¦ã¶TypeScriptã®å‚™å¿˜éŒ²"
emoji: "ğŸ"
type: "idea" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["TypeScript", "Nodejs"]
published: true
---

## ã¯ã˜ã‚ã«

æ‰‹ã‚’å‹•ã‹ã—ã¦å­¦ã¶TypeScriptã®å‚™å¿˜éŒ²

https://www.amazon.co.jp/dp/4863543557

## 1ç« 

### ã‚µãƒ–ã‚¿ã‚¤ãƒ—

ä»¥ä¸‹ã®ãƒªãƒ†ãƒ©ãƒ«å‹ã¯ã©ã‚Œã‚‚é€šå¸¸ã®ãƒ‡ãƒ¼ã‚¿å‹ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¨ãªã£ã¦ã„ã‚‹
ã‚µãƒ–ã‚¿ã‚¤ãƒ—ã¨ã¯ç¶™æ‰¿ã®ã‚ˆã†ãªã‚‚ã®

```ts
const num: 123 = 123
const name: 'Jack' = 'Jack'
console.log(num) // numã¯123å‹ã§numberå‹ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—
console.log(name) // nameã¯'Jack'å‹ã§stringå‹ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—
name.toLowerCase() // stringå‹ã®ã‚µãƒ–ã‚¿ã‚¤ãƒ—ãªã®ã§toLowerCaseã‚’å‘¼ã³å‡ºã›ã‚‹
```

### ãƒªãƒ†ãƒ©ãƒ«å‹ã¨Stringå‹ã®å‹æ¨è«–

letã§å®šç¾©ã—ãŸname1ã¯stringã¨ã—ã¦æ¨æ¸¬ã•ã›ã‚‹
ä¸€æ–¹ã§ã€sayHelloã®å¼•æ•°ã¯ãƒªãƒ†ãƒ©ãƒ«å‹ã¨ã—ã¦æ¨æ¸¬ã•ã‚Œã‚‹ã®ã§ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹

```ts
let name1 = 'Hoge'

const sayHello = (personName: 'Fuga') {
  console.log(personName)
}

sayHello(name1) // å‹ 'string' ã®å¼•æ•°ã‚’å‹ '"Fuga"' ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã«å‰²ã‚Šå½“ã¦ã‚‹ã“ã¨ã¯ã§ãã¾ã›ã‚“ã€‚
```


## 3ç« 

```ts:package.json
{
  "name": "app",
  "version": "1.0.0",
  "description": "",
  "main": "index.js",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1",
    "build": "tsc",
    "dev": "tsc -w"
  },
}
```

- tsconfig.jsonã¯tscã«ã‚ˆã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚’å®Ÿè¡Œã®ãŸã‚ã«å¿…è¦
- `tsc -w` wã‚ªãƒ—ã‚·ãƒ§ãƒ³ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ç›£è¦–ã—ã¦å¤‰æ›´ãŒã‚ã‚Œã°è‡ªå‹•ã§ãƒ“ãƒ«ãƒ‰å®Ÿè¡Œã—ã¦ãã‚Œã‚‹
- `--save-dev`ã¯ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®å®Ÿè¡Œæ™‚ã«ã¯ä½¿ç”¨ã—ãªã„ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã«ä½¿ã†
  - ä¾‹ãˆã°å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ãªã©
  - `-D`ãŒçœç•¥å½¢
- ç„¡åasyncé–¢æ•°ã®æ›¸ãæ–¹
  ```ts
  (async () => {
    const result = await Hoge();
  })();
  ```

### TypeScriptã§ã¯ã‚¯ãƒ©ã‚¹ã‚‚å‹æƒ…å ±ã¨ã—ã¦æ‰±ãˆã‚‹

JavaScriptã«ãŠã‘ã‚‹ã‚¯ãƒ©ã‚¹ã®ã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã¯ãŸã ã®ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®å‹ã¯ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã‚’ä½¿ã£ã¦è¡¨ã›ã‚‹
ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯å‹
ã¤ã¾ã‚Šã‚¯ãƒ©ã‚¹ã®å‹æƒ…å ±ï¼ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹

```ts
class HitAndBlow {
  answerSource: string[]
  answer: string[]
  tryCount: number

  constructor() {
    this.answerSource = ['0', '1', '2', '3', '4', '5', '6', '7','8','9']
    this.answer = []
    this.tryCount = 0
  }
}

interface HitAndBlowInterface {
  answerSource: string[]
  answer: string[]
  tryCount: number
}

const game: HitAndBlowInterface = new HitAndBlow(); // ã“ã‚Œã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‰ãªã„
```

### constructorãªãã¦ã‚‚åˆæœŸå€¤ã‚’å®šç¾©ã§ãã‚‹

ä¸Šã®ã‚¯ãƒ©ã‚¹ã‚’ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°

```ts
class HitAndBlow {
  answerSource: string[] = ['0', '1', '2', '3', '4', '5', '6', '7','8','9']
  answer: string[] = []
  tryCount: number = 0
}

æ›´ã«å‹æ¨è«–ãŒåŠ¹ãã®ã§ä»¥ä¸‹ã®ã‚ˆã†ã«çœç•¥ã§ãã‚‹
answerãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¯æ–‡å­—ã®é…åˆ—ã§ã‚ã‚‹ã“ã¨ã‚’æœŸå¾…ã—ãŸã„ã®ã§å‹ã‚’æ®‹ã—ã¦ã„ã‚‹

class HitAndBlow {
  answerSource = ['0', '1', '2', '3', '4', '5', '6', '7','8','9']
  answer: string[] = []
  tryCount= 0
}
```

### neverå‹ã®ä½¿ã„ã¿ã¡

neverå‹ã®ã©ã‚“ãªå‹ã‚‚å…¥ã‚Œã‚‰ã‚Œãªã„ã¨ã„ã†ç‰¹æ€§ã‚’æŒã¤
ä½•ãŒå¬‰ã—ã„ã‹ã¨ã„ã†ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å‰ã«ã‚¨ãƒ©ãƒ¼ã‚’æ¤œçŸ¥ã§ãã‚‹
å‹ã‚’ä½¿ã£ãŸã‚³ãƒ¼ãƒ‰ã®å®‰å…¨æ€§ã‚’å‘ä¸Šã•ã›ã‚Œã‚‹

```ts
// neverã«ã¯ã©ã‚“ãªå€¤ã‚‚å…¥ã‚Œã‚‰ã‚Œãªã„
let neverVal: never;
neverVal = 'aaaa'

//  Type 'string' is not assignable to type 'never'.
```

Modeã¯normalã¨hardã—ã‹ç†è«–çš„ã«æ¥ãªã„ã‹ã‚‰switchæ–‡ã®defaultå€¤ã¯ãªãã¦ã‚‚å‹•ã
å°†æ¥çš„ã«Modeã«`ultra`ãŒè¿½åŠ ã•ã‚ŒãŸå ´åˆã€ã“ã‚Œã ã¨defaultã«å…¥ã£ã¦ãã‚‹ã“ã¨ã«ãªã‚‹
`å•é¡Œã¯ã€ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã«åˆã‚ã¦ErrorãŒç™ºç”Ÿã—ã¦caseã®åˆ†å²ãŒè¶³ã‚Šãªã‹ã£ãŸã¨æ°—ã¥ãã“ã¨`
ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å‰ã«caseåˆ†å²è¿½åŠ ã‚’æ°—ã¥ãã“ã¨ã¯ã§ããªã„ã‹ï¼Ÿ

```ts
class Hoge {
  Mode: 'normal' | 'hard';

  fuga(mode: Mode) {
    switch(mode) {
      case "normal":
        return 3;
      case "hard":
        return 4;
      default:
        throw new Error(`${this.mode}ã¯ç„¡åŠ¹ãªãƒ¢ãƒ¼ãƒ‰ã§ã™`); // ã“ã“ã®this.modeã®å‹ã¯string literalã®`ultra`ã«ãªã£ã¦ã„ã‚‹ã®ãŒãƒã‚¤ãƒ³ãƒˆ
    }
  }
}
```

neverå‹ã®å¤‰æ•°ã«å€¤ã‚’ä»£å…¥ã•ã›ã‚‹ãƒ­ã‚¸ãƒƒã‚¯ã«ã—ã¦ãŠãã“ã¨ã§æ°—ã¥ã‘ã‚‹
ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ãŒé€šã‚‰ãšã‚¨ãƒ©ãƒ¼ç®‡æ‰€ã‚’è¦‹ã‚‹ã¨caseæ–‡ã«è¿½åŠ ã™ã‚‹ã®å¿˜ã‚Œã¦ãŸã­ã¨ã„ã†ã“ã¨ã«ãªã‚‹
ã¤ã¾ã‚Šã€neverå‹ã‚’ä¸Šæ‰‹ãåˆ©ç”¨ã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦é–‹ç™ºæ™‚ã®å®‰å…¨æ€§ãŒå¢—ã—ã¾ã™ã‚ˆ

```ts
class Hoge {
  Mode: 'normal' | 'hard';

  fuga(mode: Mode) {
    switch(mode) {
      case "normal":
        return 3;
      case "hard":
        return 4;
      default:
        const neverValue: never = this.mode; // string literalã®ultraã‚’neverå‹ã«ä»£å…¥ã—ã‚ˆã†ã¨ã™ã‚‹ã€‚neverå‹ã¯neverå‹ä»¥å¤–ã®ã©ã‚“ãªå€¤ã‚‚å…¥ã‚Œã‚‹ã“ã¨ãŒã§ããªã„
        throw new Error(`${neverValue}ã¯ç„¡åŠ¹ãªãƒ¢ãƒ¼ãƒ‰ã§ã™`);
    }
  }
}

### Typeã¨Interface

- ãƒãƒ¼ãƒ å†…ã§ãƒ«ãƒ¼ãƒ«ã‚’ä½œã£ã¦ã©ã¡ã‚‰ã‚’ä½¿ã†ã‹ã‚’æ±ºã‚ã¦ãŠã
- Typeã¯å¿…ãšå…ˆé ­ã§å®£è¨€ã—ã¦ãŠã
- åˆä½µã®è¨˜è¿°ãŒç•°ãªã‚‹
  ```ts
  // Type
  type Hoge = { name: string }
  type Fuga = { age: number }
  type Human = Hoge & Fuga

  // Interface
  interface Hoge = { name: string }
  interface Fuga = { age: number }
  interface Human extends  Hoge, Fuga {}
  ```
- Interfaceã¯åŒã˜åå‰ã®å®šç¾©ãŒã‚ã£ãŸã‚‰è‡ªå‹•ã§ãƒãƒ¼ã‚¸ã™ã‚‹(declaration merging)ã®ã§æ„å›³ã—ãªã„å‹ã«ãªã‚‰ãªã„ã‚ˆã†ã«æ³¨æ„
  ```ts
  interface Person {
    name: string
    age: number
  }

  interface Person {
    height: number
  }

  const person: Person = {
    name: 'hoge',
    age: 20
  }
  // heightãŒç„¡ã„ã¨ã„ã†ã‚¨ãƒ©ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹
  ```

### å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³(as)

- å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¯TypeScriptã®å‹æ¨è«–ã‚’é–‹ç™ºè€…å´ã§ä¸Šæ›¸ãã§ãã‚‹
- TypeScriptã®å‹ãƒã‚§ãƒƒã‚¯ã®æ©æµã‹ã‚‰å¤–ã‚Œã‚‹ã“ã¨ã«ãªã‚‹ã®ã§å¤šç”¨ã¯ã•ã‘ã‚‹ã¹ã
- å‹ã‚­ãƒ£ã‚¹ãƒˆã¨åˆ¥ç‰©ã§ã‚ã‚‹ã“ã¨ã«æ³¨æ„
  - å‹ã‚­ãƒ£ã‚¹ãƒˆã¯å€¤ãã®ã‚‚ã®ã‚’å¤‰ãˆã¦ã—ã¾ã†ã®ã§ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å½±éŸ¿ã™ã‚‹
  - å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚ãã¾ã§ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«æ™‚ã®å‹è§£æ±ºã«å½±éŸ¿ã‚’ä¸ãˆã‚‹ã‚‚ã®ã§ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«ã¯å½±éŸ¿ã—ãªã„
    - æ•…ã«ãƒ©ãƒ³ã‚¿ã‚¤ãƒ å¾Œã®å…¥åŠ›å€¤ã«ã‚ˆã£ã¦ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹éš™ãã‚’ç”Ÿã‚“ã§ã—ã¾ã†å¯èƒ½ãŒã‚ã‚‹

### ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹

å¼•æ•°ã«stringã‹numberå‹ã‚’ä½¿ã†ã“ã¨ãŒã§ãã¦ãã®å€¤ã‚’è¿”ã™é–¢æ•°ã‚’æ›¸ãå ´åˆ

```ts
const returnVal = (value: string | number) => {
  return value;
}
const personName = returnVal('hoge');
const age = returnVal(20);
```

ã¨ã„ã†é¢¨ã«æ›¸ã‘ã‚‹ãŒã€å¼•æ•°ã®å‹ã®ãƒãƒªã‚¨ãƒ¼ã‚·ãƒ§ãƒ³ãŒå¢—ãˆã„ãã¨çµæ§‹è¾›ã„
ãã“ã§ã‚¸ã‚§ãƒãƒªã‚¯ã‚¹ã¨ã„ã†å‹•çš„ã«å‹ã‚’ä»˜ä¸ã™ã‚‹æ›¸ãæ–¹ãŒã‚ã‚‹

```ts
const returnValue = <T>(value: T) => {
  return value;
}
const personName2 = returnValue<string>('hoge');
const age2 = returnValue<number>(20);
const personName3 = returnValue('hoge'); // stringã®éƒ¨åˆ†ã¯å‹æ¨è«–ãŒåŠ¹ãã®ã§çœç•¥å¯
```

Tã®éƒ¨åˆ†ã¯ä½•ã§ã‚‚è‰¯ã„HogeHogeã§ã‚‚å•é¡Œãªã„
æ…£ç¿’çš„ã«`T`,`S`,`U`ãŒä½¿ã‚ã‚Œã‚‹ã“ã¨ãŒå¤šã„

### Stringã®é…åˆ—ã‹ã‚‰å‹ã‚’æŠ½å‡º

```ts
const modes = ['normal' , 'hard']
```
ã‹ã‚‰
```ts
type Mode = 'normal' | 'hard'
```
ã‚’ä½œã‚‹ã“ã¨ãŒã§ãã‚‹
æ–¹æ³•ã¨ã—ã¦ã¯
- `typeof`ã§å‹ã‚’æŠ½å‡ºã™ã‚‹
- `as const`ã§string literalã®ã¾ã¾æŠ½å‡º
- ã‚¿ãƒ—ãƒ«å‹ã®è¦ç´ ã‚’æŠ½å‡ºã§ãã‚‹ã‚ˆã†ã«numberã‚’ä½¿ã†
ã§çµæœã¨ã—ã¦ã¯ä»¥ä¸‹ã®ã‚ˆã†ã«ãªã‚‹
```ts
const modes = ['normal' , 'hard'] as const
type Mode = typeof modes[number]
```

```ts
typeof modes // typeofã ã‘ã ã¨string[]ã¨ã—ã¦æŠ½å‡ºã•ã‚Œã¦ã—ã¾ã†
```

ãã“ã§`as const`ã‚’ä»˜ã‘ã‚‹ã“ã¨ã§string literalã¨ã—ã¦æŠ½å‡ºã§ãã‚‹
```ts
const modes = ['normal' , 'hard'] as const
typeof modes // ã‚¿ãƒ—ãƒ«å‹ã¨ã—ã¦æŠ½å‡ºã§ãã‚‹ ['normal' , 'hard']
```

æœ€çµ‚çš„ã«ã¯ãƒ¦ãƒ‹ã‚ªãƒ³å‹ã‚’è¡¨ç¾ã—ãŸã„
é…åˆ—ã‚„ã‚¿ãƒ—ãƒ«ã®å‹ã‚’å–ã‚Šå‡ºã™æ–¹æ³•ã¯ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ç•ªå·ã‚’æŒ‡å®šã—ã¦ã‚ã’ã‚Œã°è‰¯ã„
ã—ã‹ã—ã€ä»Šå›ã¯å…¨è¦ç´ ãŒå¯¾è±¡ãªã®ã§ã€ãã‚“ãªã¨ãã®ãŸã‚ã®ä¾¿åˆ©ãªnumberã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ã‚’ä½¿ã†

```ts
const modes = ['normal' , 'hard'] as const
typeof modes[number] // modes[0]ã ã¨'normal'ã¨ã„ã†string literalå‹ãŒæŠ½å‡ºã•ã‚Œã‚‹
```

### constructorã®çœç•¥å½¢

```ts
class Person {
  readonly name: string;
  constructor(name: string) {
    this.name = name;
  }
}
const person = new Person('hoge');
```

ã¨ã€€

```ts
class Person {
  constructor(private name: string) {} // å¼•æ•°ã«ã¯private, public, readonlyãªã©ã®ä¿®é£¾å­ãŒãªã„ã¨è‡ªå‹•ã§ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ã¨ã—ã¦ã‚»ãƒƒãƒˆã—ã¦ãã‚Œãªã„ã®ãŒãƒã‚¤ãƒ³ãƒˆ
}
const person = new Person('hoge');
```

ã¯åŒã˜

### ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚·ã‚°ãƒãƒãƒ£

```ts
type GameStore = {
  'hit and blow': HitAndBlow,
  'janken': Janken
}
```
æ–°ã—ã„è¦ç´ è¿½åŠ ã®éš›ã«ã‚­ãƒ¼ã¨å€¤ã‚’è¿½åŠ ã™ã‚‹ã®ã§ã¯ãªãã€å€¤ã®è¿½åŠ ã ã‘ã§å¯¾å¿œã—ãŸã„ã¨ã„ã†è¦æœ›ã«
ã‚­ãƒ¼ã®æ±åŒ–ã§ã‚ã‚‹ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚·ã‚°ãƒãƒãƒ£ãŒä½¿ãˆã‚‹
```ts
type GameStore = {
  [key: string]: HitAndBlow | Janken
}
```
ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹ã‚·ã‚°ãƒãƒãƒ£ã‚’ä½¿ã†ã“ã¨ã§ã‚¹ãƒƒã‚­ãƒªã—ãŸè¡¨ç¾ã«ãªã‚‹
ä¸€æ–¹ã§ã€ã‚­ãƒ¼ãŒä½•ã§ã‚‚å…¥ã£ã¦ã—ã¾ã†ã®ã§å‹ã«ã‚ˆã‚‹å®‰å…¨æ€§ã¯ä¸‹ãŒã‚‹
ãã“ã§Mapped Typesã«ã‚ˆã‚‹ã‚­ãƒ¼ã®åˆ¶é™ã‚’å…¥ã‚Œã‚‹ã¨è‰¯ã„

### Mapped Typesã«ã‚ˆã‚‹ã‚­ãƒ¼ã®åˆ¶é™

JavaScriptã§é…åˆ—ã‚’mapã™ã‚‹ã¨ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã®ç¬¬ä¸€å¼•æ•°ã§ãã‚Œãã‚Œã®å€¤ã‚’å–ã‚Œã‚‹ã®ã¨åŒã˜ã‚ˆã†ãªä»•çµ„ã¿

```ts
type Member = 'John' | 'Anna'
type Band = {
  [key in Member]: { part: string }
}
```

ä¸€èˆ¬åŒ–ã™ã‚‹ã¨ã“ã‚“ãªæ„Ÿã˜

> { [K in T]: U }

Tã¯ãƒ¦ãƒ‹ã‚ªãƒ³ãŒå…¥ã£ã¦ãã‚‹(æ–‡å­—åˆ— or æ•°å­—ã®)
Kã¯Tã®ä¸­ã®1ã¤ã®å‹
Uã¯ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã«ã—ãŸéš›ã®å‹


## 4ç« 

### ã‚°ãƒ­ãƒ¼ãƒãƒ«ã®åå‰ç©ºé–“ã§å¤‰æ•°å®£è¨€ã™ã‚‹ã¨å‹æƒ…å ±ã¯å‚ç…§ã§ãã¦ã—ã¾ã†ç½ 

ãã®ãŸã‚åˆ¥ã®å¤‰æ•°ã¨åå‰ãŒç«¶åˆã™ã‚‹å ´åˆè¡çªã—ã¦ã—ã¾ã†

getHoby.tsä¸Šã§ã¯exportã—ã¦ãªã„ãŸã ã®å®šæ•°ã ãŒ

```ts:getHoby.ts
const getHoby = () => 'game';
```

åŒã˜éšå±¤ã®index.tsã‹ã‚‰å‚ç…§ã§ãã‚‹

```ts:index.ts
const hoby = getHoby();
```

ã—ã‹ã—ã€å‹ã®å‚ç…§ãŒã§ãã¦ã„ã‚‹ã ã‘ã§å®Ÿéš›ã®é–¢æ•°ã‚’å‚ç…§ã—ã¦ã„ã‚‹è¨³ã§ãªã„
ãã®ãŸã‚ãƒ“ãƒ«ãƒ‰å¾Œã«å®Ÿè¡Œã™ã‚‹ã¨ãƒ­ã‚¸ãƒƒã‚¯ã®ä¸­èº«ãŒãªã„ã¨ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã™ã‚‹

> ReferenceError: getHoby is not defined

ã§ã¯ã©ã†ã—ãŸã‚‰è‰¯ã„ã‹ã§ã„ã†ã¨export, importã‚’ä½¿ã†

```ts:getHoby.ts
export const getHoby = () => 'game';
```

```ts:index.ts
import { getHoby } from './getHoby';
const hoby = getHoby();
```

exportãŒä½•ã‚’ã—ã¦ã„ã‚‹ã‹ã¨ã„ã†ã¨`ãƒ­ãƒ¼ã‚«ãƒ«ã‚¹ã‚³ãƒ¼ãƒ—å†…`ã«é–‰ã˜è¾¼ã‚ã‚‹å½¹å‰²ã‚’æ‹…ã£ã¦ã„ã‚‹
ï¼ˆå…ˆç¨‹ã¯exportã‚’ä»˜ã‘ãªã„ã“ã¨ã§ã‚°ãƒ­ãƒ¼ãƒãƒ«ç©ºé–“ã«å¤‰æ•°å®£è¨€ã—ã¦ã„ãŸãŸï¼‰

index.tså´ã§getHobyã‚’å‚ç…§ã—ãŸã„å ´åˆã¯importã‚’ä½¿ã†
ã“ã‚Œã«ã‚ˆã‚Šã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã«ã¡ã‚ƒã‚“ã¨getHobyã‚’ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰èª­ã¿è¾¼ã‚“ã§å‚ç…§ã§ãã‚‹å½¢ã«ã—ã¦ãã‚Œã‚‹

ã“ã®exportã¨importã®ä»•çµ„ã¿ã¯`ãƒ•ã‚¡ã‚¤ãƒ«ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«`ã¨å‘¼ã°ã‚Œã¦ã„ã‚‹

### export defaultã®ç½ 

åŸºæœ¬ä½¿ã‚ãªã„
1. importã§å‘¼ã³å‡ºã™æ™‚ã«åå‰ã‚’å‹æ‰‹ã«å¤‰ãˆã‚‹ã“ã¨ãŒã§ãã‚‹
  ãã®ãŸã‚åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«ã§åå‰ãŒè¡çªã™ã‚‹ã“ã¨ãŒã‚ã‚‹
2. ã‚¨ãƒ‡ã‚£ã‚¿ã¨ã®ç›¸æ€§è‰¯ããªã„
  vscodeã§å¤‰æ•°åã‚’è¨˜è¿°ã™ã‚‹ã“ã¨ã§importã‚’è£œå®Œã—ã¦ãã‚Œã‚‹æ©Ÿèƒ½ãŒåƒã‹ãªã„

### ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®æ­´å²

- ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰(Node.js)ã®JSãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  - CommonJS
    - ã‚µãƒ¼ãƒãƒ¼ã‚µã‚¤ãƒ‰JSã®ä»•æ§˜ã®ã“ã¨
    - CommonJSã®ä»•æ§˜ã«æ²¿ã£ãŸJSã®ã‚µãƒ³ãƒ—ãƒ«ã‚³ãƒ¼ãƒ‰ã¯
      ```js:sum.js
      module.export = function(a,b) {
        return a + b
      }
      ```
      ```js:index.js
      const sum = require('./sum.js');
      console.log(sum(1,2));
      ```
- ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ã®JSãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  - AMD(Asynchronous module definition)
    - ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã‚‚ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’éåŒæœŸã§ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ä»•æ§˜ã‚‚åºƒã¾ã£ã¦ã„ã£ãŸ
      ```js
      define(function() {
        return function sum(a, b) {
          return a + b
        }
      })
      ```
      ```js
      define(['sum'], function(sum) {
        console.log(sum(1, 2))
      })
      ```
- ãƒ–ãƒ©ã‚¦ã‚¶ç’°å¢ƒã§ã®å®Ÿè¡Œã§ãã‚‹ã‚ˆã†ã«ãƒ“ãƒ«ãƒ‰ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«
  - Browserify
    - CommonJSå½¢å¼ã®JSã®ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã—ã¦1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¾ã¨ã‚ã¦å‡ºåŠ›ã—ã¦ãã‚Œã‚‹
  - RequireJS
    - Browserifyã¨é•ã„äº‹å‰ã«ãƒ“ãƒ«ãƒ‰ã—ã¦ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã™ã‚‹è¨³ã§ãªã„
    - ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ä¸Šã§éåŒæœŸã«ä¾å­˜é–¢ä¿‚ã‚’è§£æ±ºã™ã‚‹

Node.jsã§ã¯CommonJSå½¢å¼ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ã§ã¯Browserifyã‚„RequireJSã§ã¨é–‹ç™ºè€…ãŒå¤§å¤‰ãªæ™‚ä»£ãŒã‚ã£ãŸ

ãã®å¾Œ2015ã«ECMAScript Modules(ESModules)ã«çµ±ä¸€ã™ã‚‹å‹•ããŒã§ãŸ
ESModulesã®ã‚µãƒ³ãƒ—ãƒ«ã¯TypeScriptã®æ›¸ãæ–¹ã®ãã‚Œ
```js
export function sum(a,b) {
  return a + b
}
```
```js
import { sum } from './sum.js';
console.log(sum(1,2));
```

ã—ã‹ã—ã€æ­£å¼ãªãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ä»•æ§˜ãŒå®šã‚ã‚‰ã‚ŒãŸã‘ã©ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®ç¨®é¡ã«ã‚ˆã£ã¦ã¯å¯¾å¿œã—ã¦ãªã„ã‚‚ã®ã‚‚ã‚ã‚‹ã®ãŒç¾çŠ¶
å…·ä½“çš„ã«ã¯IEã¯ESModulesæœªå¯¾å¿œ(Chrome, Firefox, Edgeãªã©ã¯å¯¾å¿œæ¸ˆã¿)

ãƒ–ãƒ©ã‚¦ã‚¶ã«ã‚ˆã£ã¦ã¯ã¾ã¡ã¾ã¡ãªçŠ¶æ³ã«å¯¾ã—ã¦Webpackã¨ã„ã†ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒå‡ºã¦ããŸ
CommonJSã ã‚ã†ã¨ESModulesã ã‚ã†ã¨ã€ã™ã¹ã¦ã®å½¢å¼ã‚’ãƒ–ãƒ©ã‚¦ã‚¶ã§å‹•ãå½¢ã«å¤‰æ›ã—ã¦ãã‚Œã‚‹ã¨ã„ã†å„ªã‚Œã‚‚ã®

Node.jsã‚‚ESModuleså¯¾å¿œã•ã‚Œã¦ã„ã‚‹ã‘ã©ã€CommonJSå½¢å¼ã®ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã¯ã¾ã å¤šãæ®‹ã£ã¦ã„ã‚‹ã®ãŒç¾çŠ¶

ESModulesã‚‚è‰¯ã„ã¨ã“ã‚ã°ã‹ã‚Šã§ã¯ãªã„ã€importãŒæ·±ããƒã‚¹ãƒˆã—ã¦ã„ã‚‹ã¨ã€ãƒ©ã‚¦ãƒ³ãƒ‰ãƒ‰ãƒªãƒƒãƒ—ã‚¿ã‚¤ãƒ ãŒé•·ããªã£ã¦ã—ã¾ã†

### å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«(DefinitelyTyped)ãŒå¿…è¦ã‹ã©ã†ã‹ã®ç¢ºèªæ–¹æ³•

npmã®ã‚µã‚¤ãƒˆã§ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’æ¤œç´¢ã—`DT`ã®ãƒãƒ¼ã‚¯ãŒã‚ã‚Œã°ã€`@types/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå`

node_modules/@types/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªå

ã§ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã‚‹
å‹æƒ…å ±ã¯`index.d.ts`ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã‚‹

![](/images/learning-typescript/definitely-typed.png =300x)

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚³ãƒ¼ãƒ‰ä¸Šã§importã™ã‚‹ã¨ã€ãã®ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®index.d.tsã‚’å‚ç…§ã—ã¦ãã‚Œã‚‹ã¨ã„ã†

ä¸€æ–¹ã§ã€@types/ãƒ©ã‚¤ãƒ–ãƒ©ãƒªåã¯åˆ¥ã®äººãŒä½œæˆã—ã¦ã„ã‚‹ã®ã§ã€`æœ€æ–°ã®å‹æƒ…å ±ã«è¿½å¾“ã—ã¦ã„ã‚‹ä¿è¨¼ãŒãªã„`ã“ã¨ã«æ³¨æ„


### DefinitelyTypedãŒãªã„å ´åˆã¯è‡ªåˆ†ã§ä½œã‚‹ã—ã‹ãªã„

ts/@types/uuid/index.d.ts

```ts
declare module 'uuid' {
  namespace uuid {
    function v4(): string
  }
  export = uuid
}
```

ç´°ã‹ã„å‹å®šç¾©ã¯çœç•¥ã€‚declareã§ãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®å‹å®šç¾©ãŒã§ãã‚‹ã“ã¨ã ã‘è¦šãˆã¦ãŠã

### enumã‚’ä½¿ã†ã¹ãã§ãªã„ç†ç”±

- TypeScriptã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«åˆã£ã¦ãªã„
  TypeScriptã¯ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã™ã‚‹ã¨JavaScriptã«ãªã‚‹
  ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«å¾Œã¯å‹å®šç¾©ã¯å…¨ã¦å‰Šé™¤ã•ã‚Œã‚‹
  ã¤ã¾ã‚Šã€TypeScriptã®æ§‹æ–‡ã¯JavaScriptã®ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å½±éŸ¿ä¸ãˆãªã„
  ã—ã‹ã—ã€enumã¯ãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«æ®‹ã‚‹æ§‹æ–‡ã§ã‚ã‚Šãƒ©ãƒ³ã‚¿ã‚¤ãƒ ã«å½±éŸ¿ã‚’ä¸ãˆã¦ã„ã‚‹
  TypeScriptã®ã‚³ãƒ³ã‚»ãƒ—ãƒˆã«enumã¯ããã‚ãªã„ã®ãŒç†ç”±ã®ï¼‘ã¤
- æ•°å€¤åˆ—æŒ™å‹ã®Enumã¯æ–¹å®‰å…¨ã§ãªã„
  ```ts
  enum Color {
    Red,
    Yellow
  }
  const num = 10
  const color: Color = num // ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ãªã„
  ```

### enumã®ä»£æ›¿

ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆå‹ã‚’åˆ©ç”¨ã™ã‚‹ã“ã¨ã§enumã®æ©Ÿèƒ½ã‚’ä»£æ›¿ã§ãã‚‹
keyofã«ã‚ˆã‚‹å‹ã®æŠ½å‡ºã¨ã€å‹ã‚¢ã‚µãƒ¼ã‚·ãƒ§ãƒ³ã®as constã€typeofã‚’ä½¿ç”¨ã™ã‚‹

### tsconfig

- noUnusedParameters
é–¢æ•°ã®é€”ä¸­ã®å¼•æ•°ã‚’ä½¿ã‚ãªã„å ´åˆã€å¼•æ•°åã®å…ˆé ­ã« `_` ã‚’ä»˜ã‘ã‚‹ã“ã¨ã‚’å¼·åˆ¶ã™ã‚‹ã‚ªãƒ—ã‚·ãƒ§ãƒ³
_ä»˜ã‘ãªã„ã¨ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹
```ts
dragula([this.doingList, this.todoList, this.doneList]).on("drop", (el, target, _source, sibling) => {
  let newStatus: Status = statusMap.todo;
  if (target.id === "doingList") newStatus = statusMap.doing;
  if (target.id === "doneList") newStatus = statusMap.done;

  onDrop(el, sibling, newStatus)
})
```

### Assertion Functions

æ–‡å­—åˆ—ã®å ´åˆã®ã¿å¤§æ–‡å­—ã«ã—ãŸã„é–¢æ•°ãŒã‚ã£ãŸã¨ã™ã‚‹
ä¸€æ–¹ã§å¼•æ•°ãŒä½•ãã‚‹ã‹åˆ†ã‹ã‚‰ãªã„ã®ã§anyã«ã—ã¦ã„ã‚‹å ´åˆã¯ã“ã‚“ãªæ„Ÿã˜ã§ãƒ­ã‚¸ãƒƒã‚¯æ›¸ã‘ã‚‹
```ts
function toUpper(value: any) {
  if (typeof value !== 'string') {
    throw new Error('avlue is not a string')
  }
  return value.toUpperCase()
}
```

Assertion Functionsã‚’ä½¿ã£ã¦å‹åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã‚’å¤–ã ã—ã™ã‚‹ã“ã¨ãŒã§ãã‚‹

```ts
function toUpper(value: any) {
  assertIsString(value)  // ãƒã‚¤ãƒ³ãƒˆï¼šä»¥é™ã®ã‚³ãƒ¼ãƒ‰ã§ã¯valueã¯stringä»¥å¤–ã¯å…¥ã£ã¦ã“ãªã„ã¨æ‰±ã£ã¦ãã‚Œã‚‹
  return value.toUpperCase()
}

function assertIsString(value: any): asserts value is string { // ãƒã‚¤ãƒ³ãƒˆï¼šasserts T is U ã¨ã„ã†æ§‹æ–‡
  if (typeof value !== 'string') {
    throw new Error('avlue is not a string')
  }
}
```

ã‚ˆã‚Šè¤‡é›‘ãªanyã®åˆ¤å®šãƒ­ã‚¸ãƒƒã‚¯ã«ã¦å¤§ããªåŠ›ã‚’ç™ºæ®ã™ã‚‹
ä¾‹ãˆã°JSONã¯ã„ã‚ã‚“ãªå‹ã®å€¤ã‚’å†…åŒ…ã—ã¦ã„ã‚‹ã®ã§ä¾¿åˆ©
ãªã«ã‚ˆã‚Šã€`as`ã‚’ä½¿ã†ã“ã¨ç„¡ã`å‹å®‰å…¨`ã«ã‚³ãƒ¼ãƒ‰ã‚’è¨˜è¿°ã§ãã‚‹å¼·ã¿ãŒã‚ã‚‹
ä¸€æ–¹ã§ã€ä¾‹å¤–ã‚’å¿…ãšæŠ•ã’ã‚‹ã“ã¨ã«ãªã‚‹ã®ã§ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ãŒå¿…è¦ã«ãªã‚‹

### Conditional Types

ä»£å…¥ã•ã‚Œã‚‹Tå‹ãŒ { message: unknown } ã«ä»£å…¥å¯èƒ½ã§ã‚ã‚Œã°ã€T["message"] ã‚’è¿”ã™ã€‚ãã†ã§ãªã‘ã‚Œã° never ã‚’è¿”ã™ã€‚

```ts
type MessageOf<T> = T extends { message: unknown } ? T["message"] : never

interface Email {
  message: string
}

interface Dog {
  bark(): void
}

type EmailMessage = MessageOf<Email> // string
type DogMessage = MessageOf<Dog> // never
```

### unkownå‹ ã¨ anyå‹ ã®ä½¿ã„æ‰€

unknownã¯anyã¨åŒã˜æ§˜ã«ä½•ã§ã‚‚å…¥ã‚Œã‚‹ã“ã¨ãŒã§ãã‚‹ã€‚ä¸€æ–¹ã§ãã®ä½¿ã„æ‰€ãŒãƒ”ãƒ³ã¨ã“ãªã„ã€‚
ãƒã‚¤ãƒ³ãƒˆã¯ã€`ä½¿ã†ã‹ã©ã†ã‹` ã§åŒºåˆ¥ã™ã‚‹ã€‚

- anyã¯ä½•ã§ã‚‚å…¥ã‚Œã‚‰ã‚Œã¦ã€å‚ç…§ã‚‚å¯èƒ½
- unknownã¯ãªã‚“ã§ã‚‚å…¥ã‚Œã‚‰ã‚Œã‚‹ãŒã€å‚ç…§ã§ããªã„(unknownå‹ã‚’å‚ç…§ã—ã‚ˆã†ã¨ã™ã‚‹ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã‚¨ãƒ©ãƒ¼ã«ãªã‚‹)

Conditional Typesã§unkownå‹ã‚’ä½¿ã£ã¦ã„ã‚‹ãŒã€ã“ã‚Œã¯messsageã‚’å‚ç…§ã™ã‚‹è¨³ã§ã¯ãªãã€ãŸã ãã®å‹ã«ãƒãƒã‚‹ã‹ã©ã†ã‹(messageã‚’ã‚­ãƒ¼ã«æŒã¤ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã§ã‚ã‚‹ã‹ã©ã†ã‹)ã ã‘ã®ç”¨é€”ã ã‹ã‚‰unkownã‚’ä½¿ã£ã¦ã„ã‚‹ã€‚

å®Ÿéš›ã®åˆ©ç”¨ã‚·ãƒ¼ãƒ³ã¨ã—ã¦ã¯ã€å‹ã‚’ä¿è¨¼ã§ããªã„ã‚±ãƒ¼ã‚¹ã§åˆ©ç”¨ã•ã‚Œã‚‹ã“ã¨ãŒå¤šã„ï¼ˆå¤–éƒ¨APIã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‚„ä½•ã‹ã‚’ãƒ‘ãƒ¼ã‚¹ã—ãŸçµæœãªã©ï¼‰

