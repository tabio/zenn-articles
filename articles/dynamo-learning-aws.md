---
title: "検討中"
emoji: "🦁"
type: "idea" # tech: 技術記事 / idea: アイデア
topics: []
published: false
---


https://docs.aws.amazon.com/ja_jp/amazondynamodb/latest/developerguide/best-practices.html


## RDB設計とNoSQLの相違点

- RDBは正規化したテーブルをまとめておけば実際の利用は柔軟に対応できる

## NoSQLの設計のベストプラクティス

- ビジネス上の課題を解決するための具体のクエリが思い浮かんでから設計を行う
  - 具体化されてない場合は設計を開始するべきでない
- Dynamoのアプリケーションでは`できるだけ少ないテーブルを維持する`
  - 関連するデータ項目を複数のテーブルに分散するのではなく、`関連項目を可能な限り近くにまとめる`（参照の局所性）
  - 例外として大容量の時系列データやアクセスパターンが多岐にわたる場合はしょうがない
- できるだけ多くのパーティションにトラフィックを均等に分散するようにデータキーを設計
- ローカルセカンダリインデックスではなく、グローバルセカンダリインデックスを使用する

## パーティション設計

「ホット」パーティションキーバリュー (何度もリクエストされるパーティションキーバリュー) が原因で全体のパフォーマンス速度が低下する場合があるので、プライマリキー要素を構築してください
パーティションキーに向いているものと向いてないもの
- Good: ユーザー ID (アプリケーションに多くのユーザーが存在する場合)
- Bad: ステータスコード (可能性のあるステータスコードが少しだけある場合) / 項目の作成日
